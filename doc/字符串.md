# 字符串

## 单行字符串

### type str

#### 首尾不含空格的字符串

ABCDML示例：

```abcdml
Label:
  text: Apple
```
或
```abcdml
Label:
  text: 
    - Apple
```

与JS对照便于开发者理解：

```js
Label.text = 'Apple';
// or Label.text = "Apple";
// or Label.text = `Apple`;
```

#### 更为安全的写法是使用反引号包络

> 对于不使用反引号的字符串，ABCDML词法分析器以空格作为开始，并已换行符及其前面的空格作为结尾，
>
> 如果字符串首尾含有空格，空格可能会被忽略

ABCDML示例：

```abcdml
Label:
  text: `Apple Pie  `
```

与JS对照便于开发者理解：

```js
Label.text = 'Apple Pie  ';
// or Label.text = "Apple Pie  ";
// or Label.text = `Apple Pie  `;
```

#### 含单引号的字符串

ABCDML示例：

```abcdml
Label:
  text: Johnny's Apple
```

与JS对照便于开发者理解：

```js
Label.text = 'Johnny\'s Apple';
// or Label.text = "Johnny's Apple";
// or Label.text = `Johnny's Apple`;
```

#### 含双引号的字符串

ABCDML示例：

```abcdml
Label:
  text: Johnny said: "This is my apple."
```

与JS对照便于开发者理解：

```js
Label.text = 'Johnny said: "This is my apple."';
// or Label.text = "Johnny said: \"This is my apple.\"";
// or Label.text = `Johnny said: "This is my apple."`;
```

#### 含单引号的字符串（安全）

> 首尾不含空格的字符串，也可以使用反引号。当然，这不是必须的。

ABCDML示例：

```abcdml
Label:
  text: `Johnny's Apple`
```

与JS对照便于开发者理解：

```js
Label.text = 'Johnny\'s Apple';
// or Label.text = "Johnny's Apple";
// or Label.text = `Johnny's Apple`;
```

#### 含双引号的字符串（安全）

ABCDML示例：

```abcdml
Label:
  text: `  Johnny said: "This is my apple."`
```

与JS对照便于开发者理解：

```js
Label.text = '  Johnny said: "This is my apple."';
// or Label.text = "  Johnny said: \"This is my apple.\"";
// or Label.text = `  Johnny said: "This is my apple."`;
```

### type text

#### 含反引号的字符串

ABCDML示例：

```abcdml
Label:
  text:
    `We can use symbol `
    + <backtick>
    + ` to mark our strings`
```

与JS对照便于开发者理解：

```js
Label.text = 'We can use symbol ` to mark our strings';
// or Label.text = "We can use symbol ` to mark our strings";
// or Label.text = `We can use symbol \` to mark our strings`;
```

#### 简化反引号仅出现在句中的字符串

> 首尾不含空格和反引号的字符串可以简化

ABCDML示例：

```abcdml
Label:
  text: We can use symbol ` to mark our strings
```

与JS对照便于开发者理解：

```js
Label.text = 'We can use symbol ` to mark our strings';
// or Label.text = "We can use symbol ` to mark our strings";
// or Label.text = `We can use symbol \` to mark our strings`;
```

#### 首尾含有空格，且句中出现反应号的字符串

> 无法简化
>
> 此列使用了较为复杂的写法，后面将做说明，此处不需要理解

ABCDML示例：

```abcdml
Label:
  text:
    > String.Repeat(<backtick>, 3)
    + We can use symbol
    + <space>
    + <backtick>
    + ` to mark our strings   `
```

与JS对照便于开发者理解：

```js
Label.text = '   We can use symbol ` to mark our strings   ';
// or Label.text = "   We can use symbol ` to mark our strings   ";
// or Label.text = `   We can use symbol \` to mark our strings   `;
```

#### 反引号出现在首尾的字符串

ABCDML示例：

```abcdml
Label:
  text: 
    `There is a string `
    + <backtick>
    + A sample string
    + <backtick>
```

与JS对照便于开发者理解：

```js
Label.text = 'There is a string `A sample string`';
// or Label.text = "There is a string `A sample string`";
// or Label.text = `There is a string \`A sample string\``;
```

#### 在字符串中嵌入字符串属性和常量

ABCDML示例：

```abcdml
Label:
  text: 
    `Johnny has `
    + $count
    + ` apple(s)`
```

与JS对照便于开发者理解：

```js
Label.text = 'Johnny has ' + count + ' apple(s)';
// or Label.text = "Johnny has " + count + " apple(s)";
// or Label.text = `Johnny has ${count} apple(s)`;
```

这里的$count是组件中的一个属性，你也可以替换为全局状态@propname和内置常量，这些将在其他环节做说明
ABCDML支持以连接符的形式嵌入其他字符串到当前字符串中
聪明的你可能已经发现上文中出现的<space>和<backtick>其实就是这样的一个字符串，我们称它们为转义常量

#### 转义常量
> 因为字符串的表达式或以空格作为分隔符，或以反引号作为分隔符，使得普通的空格和反引号无法出现在字符串的首尾
> 为此，我们设计了转义常量来作为字符串常量嵌入到字符串中
> 转义常量主要由空格符<space>和反引号<backtick>

##### 空格常量
> 标准空格常量为<space>
> 可简写为<s>

ABCDML示例：

```abcdml
Label:
  # 以下语句等同于 text: `  Johnny said: "This is my apple."`
  text: 
    <space>
    + <s>
    + Johnny said: "This is my apple."
```

与JS对照便于开发者理解：

```js
Label.text = '  Johnny said: "This is my apple."';
// or Label.text = "  Johnny said: \"This is my apple.\"";
// or Label.text = `  Johnny said: "This is my apple."`;
```

##### String.Repeat函数
> 如果我们需要连续嵌入多个相同的字符串到字符串中
> 可以使用标准函数String.Repeat，具体使用方法将在函数章节中讲解
> 现在我们可以将上一个例子做如下修改

ABCDML示例：

```abcdml
Label:
  # 以下语句等同于 text: `  Johnny said: "This is my apple."`
  text:
    > String.Repeat(<s>, 2)
    + Johnny said: "This is my apple."
```

与JS对照便于开发者理解：

```js
Label.text = '  Johnny said: "This is my apple."';
// or Label.text = "  Johnny said: \"This is my apple.\"";
// or Label.text = `  Johnny said: "This is my apple."`;
```

##### 反引号常量
> 标准空格常量为<backtick>
> 可简写为<`>, 如下列

ABCDML示例：

```abcdml
Label:
  text: 
    <`>
    + A sample string
    + <`>
```

与JS对照便于开发者理解：

```js
Label.text = '`A sample string`';
// or Label.text = "`A sample string`";
// or Label.text = `\`A sample string\``;
```

## 多行文本

### type texts

> 即[text]

ABCDML示例：

```abcdml
Article:
  texts: 
    - We can declare a single line string like below:
    - <`>
      + A sample string
      + <`>
    - And we also can declare a Multiline string like the other format.
```

与JS对照便于开发者理解：

```js
Article.texts = `We can declare a single line string like below:
\`A sample string\`
And we also can declare a Multiline string like the other format.`;
// or Article.texts = 'We can declare a single line string like below:\r\n`A sample string`\r\nAnd we also can declare a Multiline string like the other format.';
// or Article.texts = "We can declare a single line string like below:\r\n`A sample string`\r\nAnd we also can declare a Multiline string like the other format.";
```

### type longstr

> longstr不支持嵌入变量

ABCDML示例：

```abcdml
Article:
  desc::: 
We can declare a single line string like below:
`A sample string`
And we also can declare a Multiline string like the other format.:::
```

与JS对照便于开发者理解：

```js
Article.desc = `We can declare a single line string like below:
\`A sample string\`
And we also can declare a Multiline string like the other format.`;
// or Article.desc = 'We can declare a single line string like below:\r\n`A sample string`\r\nAnd we also can declare a Multiline string like the other format.';
// or Article.desc = "We can declare a single line string like below:\r\n`A sample string`\r\nAnd we also can declare a Multiline string like the other format.";
```

如果字符串中含有`:::`，则无法用longstr来记录字符串，但IDE仍会以多行文本框的形式让用户输入任意字符，此时需要对`:::`进行自动转换：
ABCDML示例：

```abcdml
Article:
  desc:
    - :::
We can declare a single line string like below:
`A sample string`
And we also can declare a Multiline string like the other format:
    :::
    - <:::>
    - The first line
    - The second line
    + <:::>
```